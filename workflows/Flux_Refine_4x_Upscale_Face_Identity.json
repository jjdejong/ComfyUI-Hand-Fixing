{
  "id": "flux-refine-ultimate-upscale-face-identity-v3",
  "revision": 2,
  "last_node_id": 52,
  "last_link_id": 100,
  "nodes": [
    {
      "id": 1,
      "type": "LoadImage",
      "pos": [-800, 0],
      "size": [315, 315],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [1, 2],
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "title": "1 | Load Flux Dev Source Image (1024x1024)",
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": ["example.png", "image"],
      "color": "#666"
    },
    {
      "id": 2,
      "type": "CheckpointLoaderSimple",
      "pos": [-800, 400],
      "size": [315, 98],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [3, 4],
          "slot_index": 0
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [5, 6, 7, 8],
          "slot_index": 1
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": [9, 10],
          "slot_index": 2
        }
      ],
      "title": "2 | Load CyberRealisticXL Checkpoint",
      "properties": {
        "Node name for S&R": "CheckpointLoaderSimple"
      },
      "widgets_values": ["cyberrealisticXL_v70_fp32.safetensors"],
      "color": "#369"
    },
    {
      "id": 3,
      "type": "PulidModelLoader",
      "pos": [-400, 0],
      "size": [315, 58],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "PULID",
          "type": "PULID",
          "links": [11, 12],
          "slot_index": 0
        }
      ],
      "title": "3 | Load PuLID Model",
      "properties": {
        "Node name for S&R": "PulidModelLoader"
      },
      "widgets_values": ["pulid_v1.1.safetensors"],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 4,
      "type": "PulidInsightFaceLoader",
      "pos": [-400, 100],
      "size": [315, 58],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "FACEANALYSIS",
          "type": "FACEANALYSIS",
          "links": [13, 14],
          "slot_index": 0
        }
      ],
      "title": "4 | Load InsightFace for PuLID",
      "properties": {
        "Node name for S&R": "PulidInsightFaceLoader"
      },
      "widgets_values": ["CPU"],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 5,
      "type": "PulidEvaClipLoader",
      "pos": [-400, 200],
      "size": [315, 58],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "EVA_CLIP",
          "type": "EVA_CLIP",
          "links": [15, 16],
          "slot_index": 0
        }
      ],
      "title": "5 | Load EVA CLIP for PuLID",
      "properties": {
        "Node name for S&R": "PulidEvaClipLoader"
      },
      "widgets_values": [],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 6,
      "type": "ApplyPulid",
      "pos": [-400, 300],
      "size": [315, 266],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 3
        },
        {
          "name": "pulid",
          "type": "PULID",
          "link": 11
        },
        {
          "name": "eva_clip",
          "type": "EVA_CLIP",
          "link": 15
        },
        {
          "name": "face_analysis",
          "type": "FACEANALYSIS",
          "link": 13
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [17],
          "slot_index": 0
        }
      ],
      "title": "6 | Apply PuLID - First Pass (ENABLED)",
      "properties": {
        "Node name for S&R": "ApplyPulid"
      },
      "widgets_values": ["fidelity", 0.75, 0.0, 1.0],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 7,
      "type": "ApplyPulid",
      "pos": [-400, 630],
      "size": [315, 266],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 4
        },
        {
          "name": "pulid",
          "type": "PULID",
          "link": 12
        },
        {
          "name": "eva_clip",
          "type": "EVA_CLIP",
          "link": 16
        },
        {
          "name": "face_analysis",
          "type": "FACEANALYSIS",
          "link": 14
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 2
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [18],
          "slot_index": 0
        }
      ],
      "title": "7 | Apply PuLID - Upscale Pass (ENABLED)",
      "properties": {
        "Node name for S&R": "ApplyPulid"
      },
      "widgets_values": ["fidelity", 0.85, 0.0, 1.0],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 8,
      "type": "IPAdapterUnifiedLoaderFaceID",
      "pos": [-400, 970],
      "size": [315, 78],
      "flags": {},
      "order": 12,
      "mode": 4,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 50
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [51],
          "slot_index": 0
        },
        {
          "name": "ipadapter",
          "type": "IPADAPTER",
          "links": [52, 53],
          "slot_index": 1
        }
      ],
      "title": "8 | IPAdapter FaceID Loader (DISABLED - Alternative)",
      "properties": {
        "Node name for S&R": "IPAdapterUnifiedLoaderFaceID"
      },
      "widgets_values": ["FACEID PLUS V2", 0.6, "CPU"],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 9,
      "type": "IPAdapterFaceID",
      "pos": [-400, 1100],
      "size": [315, 418],
      "flags": {},
      "order": 13,
      "mode": 4,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 51
        },
        {
          "name": "ipadapter",
          "type": "IPADAPTER",
          "link": 52
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 54
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [55],
          "slot_index": 0
        },
        {
          "name": "face_image",
          "type": "IMAGE",
          "links": null
        }
      ],
      "title": "9 | Apply IPAdapter FaceID - First Pass (DISABLED)",
      "properties": {
        "Node name for S&R": "IPAdapterFaceID"
      },
      "widgets_values": [0.9, 1.0, "linear", "concat", 0.0, 1.0, "V only"],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 10,
      "type": "IPAdapterFaceID",
      "pos": [-400, 1570],
      "size": [315, 418],
      "flags": {},
      "order": 14,
      "mode": 4,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 56
        },
        {
          "name": "ipadapter",
          "type": "IPADAPTER",
          "link": 53
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 57
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [58],
          "slot_index": 0
        },
        {
          "name": "face_image",
          "type": "IMAGE",
          "links": null
        }
      ],
      "title": "10 | Apply IPAdapter FaceID - Upscale Pass (DISABLED)",
      "properties": {
        "Node name for S&R": "IPAdapterFaceID"
      },
      "widgets_values": [1.0, 1.0, "linear", "concat", 0.0, 1.0, "V only"],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 11,
      "type": "CLIPTextEncode",
      "pos": [50, 0],
      "size": [400, 200],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 5
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [19],
          "slot_index": 0
        }
      ],
      "title": "11 | First Pass Positive Prompt",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": ["masterpiece, best quality, photorealistic, professional photography, natural skin texture, visible pores, skin detail, realistic skin, facial detail, natural skin moisture, dewy skin, moist lips, glossy lips, detailed hair strands, sharp focus, same person, consistent identity"],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 12,
      "type": "CLIPTextEncode",
      "pos": [50, 250],
      "size": [400, 200],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 6
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [20],
          "slot_index": 0
        }
      ],
      "title": "12 | First Pass Negative Prompt",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": ["smooth skin, airbrushed, perfect skin, beauty filter, poreless, polished skin, flat skin, plastic skin, blurry, low quality, worst quality"],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 13,
      "type": "CLIPTextEncode",
      "pos": [50, 500],
      "size": [400, 200],
      "flags": {},
      "order": 17,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 7
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [21],
          "slot_index": 0
        }
      ],
      "title": "13 | Upscale Pass Positive - Enhanced Detail",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": ["masterpiece, best quality, photorealistic, ultra high resolution, 8k uhd, professional photography, natural skin texture, visible pores, skin pore detail, individual pore detail, subtle skin imperfections, realistic skin detail, authentic skin texture, facial detail, face texture, cheek texture, body skin detail, natural skin moisture, dewy skin, skin sheen, moisture highlights, moist lips, glossy lips, lip sheen, detailed hair strands, individual hair texture, natural hair detail, hair strand clarity, refined fabric texture, sharp focus, enhanced clarity, photographic quality, same person, consistent identity, facial consistency, preserved features"],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 14,
      "type": "CLIPTextEncode",
      "pos": [50, 750],
      "size": [400, 200],
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 8
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [22],
          "slot_index": 0
        }
      ],
      "title": "14 | Upscale Pass Negative - Avoid Smoothing",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": ["smooth skin, airbrushed, perfect skin, beauty filter, poreless, polished skin, flat skin, plastic skin, featureless skin, simplified skin, lack of skin detail, dry lips, matte lips, flat lips, dry skin, matte skin, blurry hair, soft hair, merged hair strands, filtered, over-processed, blurry, smoothed detail, low quality, worst quality, low resolution"],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 15,
      "type": "EmptyLatentImage",
      "pos": [500, 0],
      "size": [315, 106],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [23],
          "slot_index": 0
        }
      ],
      "title": "15 | Empty Latent (1024x1024)",
      "properties": {
        "Node name for S&R": "EmptyLatentImage"
      },
      "widgets_values": [1024, 1024, 1]
    },
    {
      "id": 16,
      "type": "KSampler",
      "pos": [850, 0],
      "size": [315, 262],
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 17
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 19
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 20
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 23
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [24],
          "slot_index": 0
        }
      ],
      "title": "16 | First Pass - Refine with Face Identity",
      "properties": {
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        123456789,
        "randomize",
        30,
        4.5,
        "dpmpp_2m_sde",
        "karras",
        0.4
      ],
      "color": "#393"
    },
    {
      "id": 17,
      "type": "VAEDecode",
      "pos": [1200, 0],
      "size": [210, 46],
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 24
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 9
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [25, 26, 60],
          "slot_index": 0
        }
      ],
      "title": "17 | Decode First Pass",
      "properties": {
        "Node name for S&R": "VAEDecode"
      },
      "widgets_values": []
    },
    {
      "id": 18,
      "type": "PreviewImage",
      "pos": [1450, 0],
      "size": [500, 400],
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 25
        }
      ],
      "outputs": [],
      "title": "18 | Preview First Pass Result",
      "properties": {
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 19,
      "type": "UpscaleModelLoader",
      "pos": [500, 300],
      "size": [315, 58],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "UPSCALE_MODEL",
          "type": "UPSCALE_MODEL",
          "links": [27],
          "slot_index": 0
        }
      ],
      "title": "19 | Load 4x Upscale Model",
      "properties": {
        "Node name for S&R": "UpscaleModelLoader"
      },
      "widgets_values": ["4x-UltraSharp.pth"],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 20,
      "type": "UltimateSDUpscale",
      "pos": [850, 600],
      "size": [315, 614],
      "flags": {},
      "order": 24,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 26
        },
        {
          "name": "model",
          "type": "MODEL",
          "link": 18
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 61
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 62
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 10
        },
        {
          "name": "upscale_model",
          "type": "UPSCALE_MODEL",
          "link": 27
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [28],
          "slot_index": 0
        }
      ],
      "title": "20 | Ultimate SD Upscale 4x with Face Identity + ControlNet Tile",
      "properties": {
        "Node name for S&R": "UltimateSDUpscale"
      },
      "widgets_values": [
        4,
        987654321,
        "randomize",
        40,
        4.0,
        "dpmpp_2m_sde",
        "karras",
        0.45,
        "Linear",
        1024,
        1024,
        32,
        32,
        "None",
        1,
        64,
        8,
        16,
        true,
        false
      ],
      "color": "#393"
    },
    {
      "id": 21,
      "type": "SaveImage",
      "pos": [1200, 600],
      "size": [600, 550],
      "flags": {},
      "order": 25,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 28
        }
      ],
      "outputs": [],
      "title": "21 | Save Final 4K Image",
      "properties": {
        "Node name for S&R": "SaveImage"
      },
      "widgets_values": ["Flux_Refine_4x_UltimateUpscale_FaceID"],
      "color": "#666"
    },
    {
      "id": 22,
      "type": "CheckpointLoaderSimple",
      "pos": [-800, 550],
      "size": [315, 98],
      "flags": {},
      "order": 7,
      "mode": 4,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [50, 56],
          "slot_index": 0
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": null
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": null
        }
      ],
      "title": "22 | Checkpoint for IPAdapter (DISABLED)",
      "properties": {
        "Node name for S&R": "CheckpointLoaderSimple"
      },
      "widgets_values": ["cyberrealisticXL_v70_fp32.safetensors"],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 23,
      "type": "LoadImage",
      "pos": [-800, 700],
      "size": [315, 315],
      "flags": {},
      "order": 8,
      "mode": 4,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [54, 57],
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "title": "23 | Load Image for IPAdapter (DISABLED)",
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": ["example.png", "image"],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 24,
      "type": "Note",
      "pos": [-800, -400],
      "size": [700, 380],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "FLUX DEV REFINER & 4X UPSCALE - ULTIMATE SD UPSCALE + CONTROLNET TILE",
      "properties": {},
      "widgets_values": [
        "PURPOSE: Refine Flux Dev 1024x1024 images and upscale to 4K with realistic skin detail\nUSES ULTIMATE SD UPSCALE + CONTROLNET TILE - No shearing, works on Mac!\n\nFACE IDENTITY OPTIONS (Toggle one or the other):\n• PuLID (ENABLED): Nodes 3-7. Best for photorealism\n  - Node 6: First pass weight 0.75\n  - Node 7: Upscale pass weight 0.85 (higher for detail preservation)\n  \n• IP Adapter FaceID (DISABLED): Nodes 8-10, 22-23. Alternative option\n  - Enable nodes 8-10, 22-23 (mode=0)\n  - Disable nodes 3-7 (mode=4)\n\nWORKFLOW:\n1. First Pass: Refine 1024x1024 with face identity (denoise 0.4)\n2. ControlNet Tile: Apply to first pass output for structure preservation\n3. Ultimate SD Upscale: Tiled 4x upscaling with integrated refinement\n   - Divides into 1024x1024 tiles with 32px padding\n   - Each tile: 4x upscale → img2img with face identity + ControlNet (denoise 0.45)\n   - Linear blending for seamless result\n   - ControlNet prevents hallucinations at higher denoise!\n\nREQUIREMENTS:\n• CyberRealisticXL checkpoint\n• PuLID models OR IPAdapter FaceID models\n• 4x-UltraSharp.pth upscale model\n• Ultimate SD Upscale custom node\n• ControlNet Tile: TTPLANET_Controlnet_Tile_realistic_v2_fp16.safetensors\n\nKEY ADVANTAGES:\n✓ No shearing issues - tiled processing\n✓ ControlNet Tile prevents hallucinations\n✓ Can use HIGHER denoise (0.45+) safely!\n✓ Face identity applied to each tile\n✓ Better memory management\n✓ Mac compatible!\n\nULTIMATE SD UPSCALE SETTINGS:\n• Upscale: 4x\n• Steps: 40, CFG: 4.0\n• Denoise: 0.45 (can go higher thanks to ControlNet!)\n• Tile size: 1024x1024\n• Padding: 32px (prevents seams)\n• Mode: Linear blending\n• Force uniform tiles: true\n\nCONTROLNET TILE SETTINGS:\n• Strength: 0.7 (adjust 0.5-1.0 as needed)\n• Start: 0.0, End: 1.0 (full process)\n• Prevents hallucinations while allowing detail generation"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 25,
      "type": "Note",
      "pos": [-400, 2040],
      "size": [520, 240],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Why ControlNet Tile is Critical",
      "properties": {},
      "widgets_values": [
        "CONTROLNET TILE - PREVENTS HALLUCINATIONS:\n\nWithout ControlNet Tile:\n• Higher denoise (0.5+) causes hallucinations\n• Face/body structure can drift\n• New unwanted details appear\n• Identity can shift\n\nWith ControlNet Tile (strength 0.7):\n✓ Maintains structural coherence from source\n✓ Safe to use denoise 0.45-0.6!\n✓ Generates detail WITHOUT hallucinations\n✓ Face identity stays locked\n✓ Body proportions preserved\n\nHow it works:\n1. First pass output (1024x1024) is the control image\n2. ControlNet Tile conditions each upscaled tile\n3. Each tile references source structure\n4. Detail is added, not invented\n\nADJUST STRENGTH:\n• 0.5-0.6: More creative freedom (higher denoise)\n• 0.7: Balanced (recommended)\n• 0.8-1.0: Strict preservation (lower denoise needed)\n\nYou can now safely increase denoise to 0.5-0.6 for more skin detail\nwithout worrying about hallucinations!"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 26,
      "type": "ControlNetLoader",
      "pos": [500, 400],
      "size": [315, 58],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CONTROL_NET",
          "type": "CONTROL_NET",
          "links": [59],
          "slot_index": 0
        }
      ],
      "title": "26 | Load ControlNet Tile",
      "properties": {
        "Node name for S&R": "ControlNetLoader"
      },
      "widgets_values": ["SDXL/TTPLANET_Controlnet_Tile_realistic_v2_fp16.safetensors"],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 27,
      "type": "ControlNetApplyAdvanced",
      "pos": [500, 500],
      "size": [315, 186],
      "flags": {},
      "order": 22,
      "mode": 0,
      "inputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 21
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 22
        },
        {
          "name": "control_net",
          "type": "CONTROL_NET",
          "link": 59
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 60
        }
      ],
      "outputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "links": [61],
          "slot_index": 0
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "links": [62],
          "slot_index": 1
        }
      ],
      "title": "27 | Apply ControlNet Tile (Prevent Hallucinations)",
      "properties": {
        "Node name for S&R": "ControlNetApplyAdvanced"
      },
      "widgets_values": [0.7, 0.0, 1.0],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    }
  ],
  "links": [
    [1, 1, 0, 6, 4, "IMAGE"],
    [2, 1, 0, 7, 4, "IMAGE"],
    [3, 2, 0, 6, 0, "MODEL"],
    [4, 2, 0, 7, 0, "MODEL"],
    [5, 2, 1, 11, 0, "CLIP"],
    [6, 2, 1, 12, 0, "CLIP"],
    [7, 2, 1, 13, 0, "CLIP"],
    [8, 2, 1, 14, 0, "CLIP"],
    [9, 2, 2, 17, 1, "VAE"],
    [10, 2, 2, 20, 4, "VAE"],
    [11, 3, 0, 6, 1, "PULID"],
    [12, 3, 0, 7, 1, "PULID"],
    [13, 4, 0, 6, 3, "FACEANALYSIS"],
    [14, 4, 0, 7, 3, "FACEANALYSIS"],
    [15, 5, 0, 6, 2, "EVA_CLIP"],
    [16, 5, 0, 7, 2, "EVA_CLIP"],
    [17, 6, 0, 16, 0, "MODEL"],
    [18, 7, 0, 20, 1, "MODEL"],
    [19, 11, 0, 16, 1, "CONDITIONING"],
    [20, 12, 0, 16, 2, "CONDITIONING"],
    [21, 13, 0, 27, 0, "CONDITIONING"],
    [22, 14, 0, 27, 1, "CONDITIONING"],
    [23, 15, 0, 16, 3, "LATENT"],
    [24, 16, 0, 17, 0, "LATENT"],
    [25, 17, 0, 18, 0, "IMAGE"],
    [26, 17, 0, 20, 0, "IMAGE"],
    [27, 19, 0, 20, 5, "UPSCALE_MODEL"],
    [28, 20, 0, 21, 0, "IMAGE"],
    [50, 22, 0, 8, 0, "MODEL"],
    [51, 8, 0, 9, 0, "MODEL"],
    [52, 8, 1, 9, 1, "IPADAPTER"],
    [53, 8, 1, 10, 1, "IPADAPTER"],
    [54, 23, 0, 9, 2, "IMAGE"],
    [55, 9, 0, 16, 0, "MODEL"],
    [56, 22, 0, 10, 0, "MODEL"],
    [57, 23, 0, 10, 2, "IMAGE"],
    [58, 10, 0, 20, 1, "MODEL"],
    [59, 26, 0, 27, 2, "CONTROL_NET"],
    [60, 17, 0, 27, 3, "IMAGE"],
    [61, 27, 0, 20, 2, "CONDITIONING"],
    [62, 27, 1, 20, 3, "CONDITIONING"]
  ],
  "groups": [],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.7,
      "offset": [1000, 500]
    }
  },
  "version": 0.4
}
