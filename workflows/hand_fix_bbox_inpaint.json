{
  "last_node_id": 16,
  "last_link_id": 25,
  "nodes": [
    {
      "id": 1,
      "type": "LoadImage",
      "pos": [
        50,
        100
      ],
      "size": {
        "0": 315,
        "1": 314
      },
      "flags": {},
      "order": 0,
      "mode": 0,
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1,
            2
          ],
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "example.png",
        "image"
      ]
    },
    {
      "id": 2,
      "type": "UltralyticsDetectorProvider",
      "pos": [
        50,
        450
      ],
      "size": {
        "0": 315,
        "1": 78
      },
      "flags": {},
      "order": 1,
      "mode": 0,
      "outputs": [
        {
          "name": "BBOX_DETECTOR",
          "type": "BBOX_DETECTOR",
          "links": [
            3
          ],
          "slot_index": 0
        },
        {
          "name": "SEGM_DETECTOR",
          "type": "SEGM_DETECTOR",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "UltralyticsDetectorProvider"
      },
      "widgets_values": [
        "bbox/hand_yolov8s.pt"
      ]
    },
    {
      "id": 3,
      "type": "BBoxDetectorCombined",
      "pos": [
        400,
        100
      ],
      "size": {
        "0": 350,
        "1": 200
      },
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [
        {
          "name": "bbox_detector",
          "type": "BBOX_DETECTOR",
          "link": 3
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            4
          ],
          "slot_index": 0
        },
        {
          "name": "SEGS",
          "type": "SEGS",
          "links": null
        },
        {
          "name": "bbox",
          "type": "BBOX",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "BBoxDetectorCombined"
      },
      "widgets_values": [
        0.5,
        10,
        1.0,
        10,
        "all"
      ]
    },
    {
      "id": 4,
      "type": "GrowMask",
      "pos": [
        800,
        100
      ],
      "size": {
        "0": 315,
        "1": 82
      },
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 4
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            5,
            20
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "GrowMask"
      },
      "widgets_values": [
        30,
        false
      ]
    },
    {
      "id": 5,
      "type": "MaskBlur",
      "pos": [
        800,
        250
      ],
      "size": {
        "0": 315,
        "1": 58
      },
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 5
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            6
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "MaskBlur"
      },
      "widgets_values": [
        15
      ]
    },
    {
      "id": 6,
      "type": "CheckpointLoaderSimple",
      "pos": [
        50,
        600
      ],
      "size": {
        "0": 315,
        "1": 98
      },
      "flags": {},
      "order": 5,
      "mode": 0,
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            7
          ],
          "slot_index": 0
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            8,
            9
          ],
          "slot_index": 1
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            10,
            11
          ],
          "slot_index": 2
        }
      ],
      "properties": {
        "Node name for S&R": "CheckpointLoaderSimple"
      },
      "widgets_values": [
        "cyberrealisticXL_v70_fp32.safetensors"
      ]
    },
    {
      "id": 7,
      "type": "CLIPTextEncode",
      "pos": [
        400,
        350
      ],
      "size": {
        "0": 400,
        "1": 200
      },
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 8
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            12
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "masterpiece, best quality, detailed human hand, (five fingers:1.4), (correct hand anatomy:1.3), proper thumb placement, natural hand pose, realistic skin texture, well-defined knuckles, natural proportions"
      ]
    },
    {
      "id": 8,
      "type": "CLIPTextEncode",
      "pos": [
        400,
        600
      ],
      "size": {
        "0": 400,
        "1": 200
      },
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 9
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [
            13
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "(deformed hand:1.6), (extra fingers:1.6), (missing fingers:1.5), (6 fingers:1.7), (7 fingers:1.6), (4 fingers:1.5), (3 fingers:1.5), fused fingers, merged digits, mutated hand, bad hand anatomy, extra limbs, poorly drawn hand, malformed hand, wrong number of fingers, incorrect finger count, (extra digit:1.5), (fewer digits:1.5), floating fingers, disconnected fingers, broken hand, impossible hand pose"
      ]
    },
    {
      "id": 9,
      "type": "VAEEncodeForInpaint",
      "pos": [
        1150,
        100
      ],
      "size": {
        "0": 315,
        "1": 98
      },
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {
          "name": "pixels",
          "type": "IMAGE",
          "link": 2
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 10
        },
        {
          "name": "mask",
          "type": "MASK",
          "link": 6
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            14
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEEncodeForInpaint"
      },
      "widgets_values": [
        6
      ]
    },
    {
      "id": 10,
      "type": "KSampler",
      "pos": [
        1500,
        100
      ],
      "size": {
        "0": 315,
        "1": 474
      },
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 7
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 12
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 13
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 14
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            15
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        12345,
        "randomize",
        40,
        7.0,
        "dpmpp_2m",
        "karras",
        0.95
      ]
    },
    {
      "id": 11,
      "type": "VAEDecode",
      "pos": [
        1850,
        100
      ],
      "size": {
        "0": 210,
        "1": 46
      },
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 15
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 11
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            16
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEDecode"
      }
    },
    {
      "id": 12,
      "type": "ImageCompositeMasked",
      "pos": [
        1850,
        200
      ],
      "size": {
        "0": 315,
        "1": 146
      },
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "name": "destination",
          "type": "IMAGE",
          "link": 2
        },
        {
          "name": "source",
          "type": "IMAGE",
          "link": 16
        },
        {
          "name": "mask",
          "type": "MASK",
          "link": 20
        },
        {
          "name": "x",
          "type": "INT",
          "link": null
        },
        {
          "name": "y",
          "type": "INT",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            21
          ],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ImageCompositeMasked"
      },
      "widgets_values": [
        0,
        0,
        false
      ]
    },
    {
      "id": 13,
      "type": "SaveImage",
      "pos": [
        2200,
        100
      ],
      "size": {
        "0": 315,
        "1": 270
      },
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 21
        }
      ],
      "properties": {},
      "widgets_values": [
        "hand_fixed_bbox"
      ]
    },
    {
      "id": 14,
      "type": "PreviewImage",
      "pos": [
        800,
        400
      ],
      "size": {
        "0": 315,
        "1": 246
      },
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 2
        }
      ],
      "properties": {
        "Node name for S&R": "PreviewImage"
      }
    },
    {
      "id": 15,
      "type": "Note",
      "pos": [
        50,
        750
      ],
      "size": {
        "0": 400,
        "1": 280
      },
      "flags": {},
      "order": 14,
      "mode": 0,
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "BBox-Based Hand Fix Workflow (SDXL)\n\nThis workflow uses RECTANGULAR BOUNDING BOXES for severe hand deformities:\n\n1. YOLO detects hands \u2192 bounding boxes\n2. BBoxDetectorCombined creates RECTANGULAR masks from boxes\n3. GrowMask expands the mask (+30px)\n4. MaskBlur (15px) for smooth blending\n5. Very high denoise (0.95) forces complete regeneration\n\nKey Settings:\n- bbox_threshold: 0.5\n- bbox_dilation: 10 (expands detection area)\n- GrowMask: +30px (gives model room to work)\n- MaskBlur: 15px (smooth transitions)\n- denoise: 0.95 (recreates from scratch)\n- steps: 40\n- CFG: 7.0\n\nBest for: 6-finger hands, fused digits, severe distortions\n\nThe rectangular bbox + high denoise lets the model recreate proper anatomy\ninstead of just enhancing the broken hand."
      ],
      "color": "#432",
      "bgcolor": "#653"
    }
  ],
  "links": [
    [
      1,
      1,
      0,
      3,
      1,
      "IMAGE"
    ],
    [
      2,
      1,
      0,
      9,
      0,
      "IMAGE"
    ],
    [
      3,
      2,
      0,
      3,
      0,
      "BBOX_DETECTOR"
    ],
    [
      4,
      3,
      0,
      4,
      0,
      "MASK"
    ],
    [
      5,
      4,
      0,
      5,
      0,
      "MASK"
    ],
    [
      6,
      5,
      0,
      9,
      2,
      "MASK"
    ],
    [
      7,
      6,
      0,
      10,
      0,
      "MODEL"
    ],
    [
      8,
      6,
      1,
      7,
      0,
      "CLIP"
    ],
    [
      9,
      6,
      1,
      8,
      0,
      "CLIP"
    ],
    [
      10,
      6,
      2,
      9,
      1,
      "VAE"
    ],
    [
      11,
      6,
      2,
      11,
      1,
      "VAE"
    ],
    [
      12,
      7,
      0,
      10,
      1,
      "CONDITIONING"
    ],
    [
      13,
      8,
      0,
      10,
      2,
      "CONDITIONING"
    ],
    [
      14,
      9,
      0,
      10,
      3,
      "LATENT"
    ],
    [
      15,
      10,
      0,
      11,
      0,
      "LATENT"
    ],
    [
      16,
      11,
      0,
      12,
      1,
      "IMAGE"
    ],
    [
      20,
      4,
      0,
      12,
      2,
      "MASK"
    ],
    [
      21,
      12,
      0,
      13,
      0,
      "IMAGE"
    ]
  ],
  "groups": [
    {
      "title": "Input & Detection",
      "bounding": [
        40,
        30,
        730,
        310
      ],
      "color": "#3f789e"
    },
    {
      "title": "Mask Processing",
      "bounding": [
        790,
        30,
        340,
        330
      ],
      "color": "#8A5082"
    },
    {
      "title": "Models & Prompts",
      "bounding": [
        40,
        550,
        780,
        300
      ],
      "color": "#8A8A00"
    },
    {
      "title": "Inpainting & Output",
      "bounding": [
        1140,
        30,
        1390,
        570
      ],
      "color": "#88AA88"
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.75,
      "offset": [
        0,
        0
      ]
    }
  },
  "version": 0.4
}