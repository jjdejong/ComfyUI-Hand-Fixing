{"id":"a1b2c3d4-e5f6-4789-a1b2-c3d4e5f67890","revision":0,"last_node_id":100,"last_link_id":220,"nodes":[{"id":1,"type":"CheckpointLoaderSimple","pos":[-575,-221],"size":[344,98],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","type":"MODEL","slot_index":0,"links":[1,2]},{"name":"CLIP","type":"CLIP","slot_index":1,"links":[3]},{"name":"VAE","type":"VAE","slot_index":2,"links":[4,5]}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["cyberrealisticXL_v70_fp32.safetensors"]},{"id":2,"type":"LoraLoader","pos":[-130,-236],"size":[270,126],"flags":{},"order":4,"mode":4,"inputs":[{"name":"model","type":"MODEL","link":1},{"name":"clip","type":"CLIP","link":3}],"outputs":[{"name":"MODEL","type":"MODEL","links":[6,7]},{"name":"CLIP","type":"CLIP","links":[8,9,10,11]}],"properties":{"Node name for S&R":"LoraLoader"},"widgets_values":["nsfw-xl-2.1.safetensors",0.25,0.3]},{"id":10,"type":"PrimitiveStringMultiline","pos":[-585,-55],"size":[520,180],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","slot_index":0,"links":[20,21]}],"title":"Base Positive Prompt","properties":{"Node name for S&R":"PrimitiveStringMultiline"},"widgets_values":["1girl, portrait, detailed face, natural expression, photorealistic, professional photography, soft lighting"],"color":"#232","bgcolor":"#353"},{"id":11,"type":"PrimitiveStringMultiline","pos":[-580,175],"size":[520,180],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","slot_index":0,"links":[22,23]}],"title":"Base Negative Prompt","properties":{"Node name for S&R":"PrimitiveStringMultiline"},"widgets_values":["sdxl_cyberrealistic_simpleneg-neg"],"color":"#322","bgcolor":"#533"},{"id":12,"type":"PrimitiveStringMultiline","pos":[-585,405],"size":[520,177],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","slot_index":0,"links":[24]}],"title":"Enhancement Positive Terms","properties":{"Node name for S&R":"PrimitiveStringMultiline"},"widgets_values":["same person, consistent identity, facial consistency, preserved features, natural skin texture, realistic skin detail, visible pores, skin texture definition, individual pore detail, subtle skin imperfections, natural imperfections, authentic skin texture, facial detail, face texture, cheek texture, body skin detail, torso texture, moist lips, glossy lips, lip sheen, natural lip moisture, skin moisture, dewy skin, natural skin sheen, moisture highlights, detailed hair strands, individual hair texture, natural hair detail, hair strand clarity, refined fabric texture, contained textile detail, sharp focus, enhanced clarity, photographic quality"],"color":"#232","bgcolor":"#353"},{"id":13,"type":"PrimitiveStringMultiline","pos":[-585,630],"size":[520,184],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","slot_index":0,"links":[25]}],"title":"Enhancement Negative Terms","properties":{"Node name for S&R":"PrimitiveStringMultiline"},"widgets_values":["smooth skin, airbrushed, perfect skin, beauty filter, poreless, polished skin, flat skin, plastic skin, featureless skin, simplified skin, lack of skin detail, dry lips, matte lips, flat lips, chalky lips, dull lips, dry skin, matte skin, excessive fabric detail, extended fabric, fabric strands, loose threads, wool fibers extending, fabric hallucination, exaggerated textile, blurry hair, soft hair, merged hair strands, filtered, over-processed, blurry, smoothed detail"],"color":"#322","bgcolor":"#533"},{"id":20,"type":"CLIPTextEncode","pos":[340,-50],"size":[290,88],"flags":{},"order":7,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":8},{"name":"text","type":"STRING","widget":{"name":"text"},"link":20}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[30]}],"title":"Generation Positive Encode","properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":21,"type":"CLIPTextEncode","pos":[340,85],"size":[290,88],"flags":{},"order":8,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":9},{"name":"text","type":"STRING","widget":{"name":"text"},"link":22}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[31]}],"title":"Generation Negative Encode","properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":22,"type":"StringConcatenate","pos":[20,360],"size":[210,166],"flags":{},"order":6,"mode":0,"inputs":[{"name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":21},{"name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":24}],"outputs":[{"name":"STRING","type":"STRING","links":[32]}],"title":"Merge Upscale Positive","properties":{"Node name for S&R":"StringConcatenate"},"widgets_values":["","",", "],"color":"#232","bgcolor":"#353"},{"id":23,"type":"StringConcatenate","pos":[20,620],"size":[210,166],"flags":{},"order":5,"mode":0,"inputs":[{"name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":23},{"name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":25}],"outputs":[{"name":"STRING","type":"STRING","links":[33]}],"title":"Merge Upscale Negative","properties":{"Node name for S&R":"StringConcatenate"},"widgets_values":["","",", "],"color":"#322","bgcolor":"#533"},{"id":24,"type":"CLIPTextEncode","pos":[340,380],"size":[290,88],"flags":{},"order":9,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":10},{"name":"text","type":"STRING","widget":{"name":"text"},"link":32}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[34]}],"title":"Upscale Positive Encode","properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":25,"type":"CLIPTextEncode","pos":[340,590],"size":[290,88],"flags":{},"order":10,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":11},{"name":"text","type":"STRING","widget":{"name":"text"},"link":33}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[35]}],"title":"Upscale Negative Encode","properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":30,"type":"EmptyLatentImage","pos":[360,-295],"size":[315,106],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"LATENT","type":"LATENT","slot_index":0,"links":[40]}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[1152,896,1]},{"id":31,"type":"KSampler","pos":[890,-145],"size":[270,262],"flags":{},"order":11,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":6},{"name":"positive","type":"CONDITIONING","link":30},{"name":"negative","type":"CONDITIONING","link":31},{"name":"latent_image","type":"LATENT","link":40}],"outputs":[{"name":"LATENT","type":"LATENT","links":[41]}],"title":"Generation KSampler","properties":{"Node name for S&R":"KSampler"},"widgets_values":[711553448522425,"randomize",37,4,"dpmpp_2m_sde","karras",1]},{"id":32,"type":"VAEDecode","pos":[1220,-150],"size":[210,46],"flags":{},"order":12,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":41},{"name":"vae","type":"VAE","link":4}],"outputs":[{"name":"IMAGE","type":"IMAGE","slot_index":0,"links":[42,43]}],"properties":{"Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":33,"type":"PreviewImage","pos":[1500,-150],"size":[600,400],"flags":{},"order":13,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":42}],"outputs":[],"properties":{"Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":40,"type":"UpscaleModelLoader","pos":[650,300],"size":[315,58],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[50]}],"properties":{"Node name for S&R":"UpscaleModelLoader"},"widgets_values":["4x-UltraSharp.pth"]},{"id":41,"type":"UltimateSDUpscale","pos":[650,400],"size":[315,614],"flags":{},"order":14,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":43},{"name":"model","type":"MODEL","link":7},{"name":"positive","type":"CONDITIONING","link":34},{"name":"negative","type":"CONDITIONING","link":35},{"name":"vae","type":"VAE","link":5},{"name":"upscale_model","type":"UPSCALE_MODEL","link":50}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[51]}],"properties":{"Node name for S&R":"UltimateSDUpscale"},"widgets_values":[4.0,165569843492139,"randomize",28,3.0,"dpmpp_2m_sde","karras",0.28,"Linear",1024,1024,16,64,"Half-Tile+ Intersections",1.0,64,8,16,1,false]},{"id":42,"type":"SaveImage","pos":[1020,400],"size":[600,450],"flags":{},"order":15,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":51}],"outputs":[],"properties":{},"widgets_values":["Generate_4x_UltimateSD"]},{"id":50,"type":"Note","pos":[-585,870],"size":[520,360],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["GENERATION + 4X ULTIMATE SD UPSCALE WORKFLOW\n\nComplete generation and upscaling workflow optimized for CyberRealisticXL.\n\nPROMPT STRATEGY:\n✓ Base prompts describe your subject/scene\n✓ Enhancement terms add detail refinement instructions\n✓ Both are concatenated for upscale pass to maintain context\n✓ This ensures the upscaler knows what it's handling\n\nGENERATION PASS (1152x896):\n- CFG: 4 (CyberRealistic sweet spot)\n- Steps: 37\n- Denoise: 1.0 (full generation)\n- Sampler: dpmpp_2m_sde + karras\n\nUPSCALE PASS (4x → 4608x3584):\n- Tile Size: 1024x1024 (better coherence, fewer seams)\n- CFG: 3.0 (lower than generation for stability)\n- Steps: 28 (sufficient for tiles)\n- Denoise: 0.28 (low for 4x, prevents over-processing)\n- Seam Fix: Linear with 64px overlap\n- Uses SAME base prompts + enhancement terms\n\nWHY IT WORKS:\n✓ No latent upscaling artifacts (no blockiness)\n✓ No denoise cliff (tiled processing eliminates this)\n✓ Perfect identity preservation\n✓ Context-aware detail generation\n✓ Clean output ready for FaceDetailer\n\nREQUIRES:\n- Ultimate SD Upscale node\n- 4x-UltraSharp.pth upscaler model\n- ~12-17GB memory recommended (Mac M4 Max 36GB: perfect!)\n\nOUTPUT:\nClean 4608x3584 image ready for FaceDetailer refinement."],"color":"#432","bgcolor":"#653"}],"links":[[1,1,0,2,0,"MODEL"],[2,1,0,41,1,"MODEL"],[3,1,1,2,1,"CLIP"],[4,1,2,32,1,"VAE"],[5,1,2,41,4,"VAE"],[6,2,0,31,0,"MODEL"],[7,2,0,41,1,"MODEL"],[8,2,1,20,0,"CLIP"],[9,2,1,21,0,"CLIP"],[10,2,1,24,0,"CLIP"],[11,2,1,25,0,"CLIP"],[20,10,0,20,1,"STRING"],[21,10,0,22,0,"STRING"],[22,11,0,21,1,"STRING"],[23,11,0,23,0,"STRING"],[24,12,0,22,1,"STRING"],[25,13,0,23,1,"STRING"],[30,20,0,31,1,"CONDITIONING"],[31,21,0,31,2,"CONDITIONING"],[32,22,0,24,1,"STRING"],[33,23,0,25,1,"STRING"],[34,24,0,41,2,"CONDITIONING"],[35,25,0,41,3,"CONDITIONING"],[40,30,0,31,3,"LATENT"],[41,31,0,32,0,"LATENT"],[42,32,0,33,0,"IMAGE"],[43,32,0,41,0,"IMAGE"],[50,40,0,41,5,"UPSCALE_MODEL"],[51,41,0,42,0,"IMAGE"]],"groups":[{"title":"Generation Settings","bounding":[-600,-350,1050,200],"color":"#3f789e","font_size":24},{"title":"Prompts","bounding":[-600,150,650,680],"color":"#8A8A00","font_size":24},{"title":"Prompt Encoding","bounding":[10,-70,640,780],"color":"#88AA88","font_size":24},{"title":"4x Upscale","bounding":[640,280,340,750],"color":"#A87A3A","font_size":24}],"config":{},"extra":{"ds":{"scale":0.85,"offset":[800,400]}},"version":0.4}
