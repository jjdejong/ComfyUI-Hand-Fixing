{
  "id": "sdxl-camera-lighting-control",
  "revision": 1,
  "last_node_id": 60,
  "last_link_id": 70,
  "nodes": [
    {
      "id": 1,
      "type": "CheckpointLoaderSimple",
      "pos": [-800, -200],
      "size": [350, 98],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [1],
          "slot_index": 0
        },
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [2, 3],
          "slot_index": 1
        },
        {
          "name": "VAE",
          "type": "VAE",
          "links": [4, 5],
          "slot_index": 2
        }
      ],
      "properties": {
        "Node name for S&R": "CheckpointLoaderSimple"
      },
      "widgets_values": ["cyberrealisticXL_v70_fp32.safetensors"],
      "title": "SDXL Checkpoint"
    },
    {
      "id": 2,
      "type": "ControlNetLoader",
      "pos": [-800, -50],
      "size": [400, 60],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CONTROL_NET",
          "type": "CONTROL_NET",
          "links": [6],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "ControlNetLoader"
      },
      "widgets_values": ["controlnet-sd-xl-1.0-depth-faid-vidit.safetensors"],
      "title": "VIDIT-FAID Lighting ControlNet",
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 10,
      "type": "PrimitiveStringMultiline",
      "pos": [-800, 100],
      "size": [520, 180],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [10],
          "slot_index": 0
        }
      ],
      "title": "Base Subject Prompt",
      "properties": {
        "Node name for S&R": "PrimitiveStringMultiline"
      },
      "widgets_values": ["a red cube on a pedestal, photorealistic, 8k, detailed, professional photography"],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 11,
      "type": "PrimitiveString",
      "pos": [-800, 340],
      "size": [520, 100],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [11],
          "slot_index": 0
        }
      ],
      "title": "Camera Position",
      "properties": {
        "Node name for S&R": "PrimitiveString"
      },
      "widgets_values": ["viewed from front center"],
      "color": "#234",
      "bgcolor": "#356"
    },
    {
      "id": 12,
      "type": "PrimitiveString",
      "pos": [-800, 490],
      "size": [520, 100],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [12],
          "slot_index": 0
        }
      ],
      "title": "Lighting Direction",
      "properties": {
        "Node name for S&R": "PrimitiveString"
      },
      "widgets_values": ["dramatic lighting, soft shadows, professional studio lighting"],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 13,
      "type": "LoadImage",
      "pos": [-800, 640],
      "size": [320, 314],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [13],
          "slot_index": 0
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": ["depth_placeholder.png", "image"],
      "title": "Load Depth Map (Optional)",
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 14,
      "type": "MiDaS-DepthMapPreprocessor",
      "pos": [-420, 640],
      "size": [320, 106],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 14
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [15],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "MiDaS-DepthMapPreprocessor"
      },
      "widgets_values": [6.283185307179586, 0.1, 512],
      "title": "Generate Depth Map (Auto)",
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 20,
      "type": "StringConcatenate",
      "pos": [-200, 200],
      "size": [300, 166],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "string_a",
          "type": "STRING",
          "link": 10,
          "widget": {"name": "string_a"}
        },
        {
          "name": "string_b",
          "type": "STRING",
          "link": 11,
          "widget": {"name": "string_b"}
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [20],
          "slot_index": 0
        }
      ],
      "title": "Merge Subject + Camera",
      "properties": {
        "Node name for S&R": "StringConcatenate"
      },
      "widgets_values": ["", "", ", "],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 21,
      "type": "StringConcatenate",
      "pos": [-200, 420],
      "size": [300, 166],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "string_a",
          "type": "STRING",
          "link": 20,
          "widget": {"name": "string_a"}
        },
        {
          "name": "string_b",
          "type": "STRING",
          "link": 12,
          "widget": {"name": "string_b"}
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [21],
          "slot_index": 0
        }
      ],
      "title": "Add Lighting",
      "properties": {
        "Node name for S&R": "StringConcatenate"
      },
      "widgets_values": ["", "", ", "],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 30,
      "type": "CLIPTextEncode",
      "pos": [180, 180],
      "size": [400, 200],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 2
        },
        {
          "name": "text",
          "type": "STRING",
          "link": 21,
          "widget": {"name": "text"}
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [30],
          "slot_index": 0
        }
      ],
      "title": "Positive Prompt Encoding",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [""]
    },
    {
      "id": 31,
      "type": "CLIPTextEncode",
      "pos": [180, 430],
      "size": [400, 200],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 3
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "links": [31],
          "slot_index": 0
        }
      ],
      "title": "Negative Prompt",
      "properties": {
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": ["blurry, low quality, distorted, bad anatomy, oversaturated, flat lighting, poor lighting"]
    },
    {
      "id": 40,
      "type": "ControlNetApplyAdvanced",
      "pos": [660, 200],
      "size": [350, 190],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 30
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 31
        },
        {
          "name": "control_net",
          "type": "CONTROL_NET",
          "link": 6
        },
        {
          "name": "image",
          "type": "IMAGE",
          "link": 15
        }
      ],
      "outputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "links": [40],
          "slot_index": 0
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "links": [41],
          "slot_index": 1
        }
      ],
      "title": "Apply VIDIT-FAID Lighting Control",
      "properties": {
        "Node name for S&R": "ControlNetApplyAdvanced"
      },
      "widgets_values": [0.65, 0.0, 1.0],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 41,
      "type": "EmptyLatentImage",
      "pos": [180, -100],
      "size": [320, 106],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [42],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "EmptyLatentImage"
      },
      "widgets_values": [1024, 1024, 1]
    },
    {
      "id": 42,
      "type": "KSampler",
      "pos": [1080, 100],
      "size": [320, 474],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 1
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 40
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 41
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 42
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [43],
          "slot_index": 0
        }
      ],
      "title": "SDXL KSampler (Mac Compatible)",
      "properties": {
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        123456789,
        "randomize",
        30,
        7.0,
        "dpmpp_2m_sde",
        "karras",
        1.0
      ]
    },
    {
      "id": 50,
      "type": "VAEDecode",
      "pos": [1480, 200],
      "size": [210, 46],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 43
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 4
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [50, 14],
          "slot_index": 0
        }
      ],
      "properties": {
        "Node name for S&R": "VAEDecode"
      }
    },
    {
      "id": 51,
      "type": "SaveImage",
      "pos": [1760, 100],
      "size": [600, 500],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 50
        }
      ],
      "outputs": [],
      "properties": {},
      "widgets_values": ["SDXL_Camera_Lighting"]
    },
    {
      "id": 60,
      "type": "Note",
      "pos": [-800, 1000],
      "size": [2200, 700],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "text": ""
      },
      "widgets_values": [
        "SDXL CAMERA & LIGHTING CONTROL WORKFLOW\nWith VIDIT-FAID ControlNet for Real Lighting Direction Control\n\nâœ… ADVANTAGES OVER FLUX:\nâ€¢ Uses DEDICATED lighting direction ControlNet (VIDIT-FAID)\nâ€¢ Depth-based lighting control (not just prompts)\nâ€¢ Better lighting consistency and control\nâ€¢ Mac-compatible with standard SDXL models\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ“¦ REQUIRED MODELS:\n\n1. SDXL Checkpoint (any SDXL model works)\n   Example: cyberrealisticXL_v70_fp32.safetensors\n   Place in: ComfyUI/models/checkpoints/\n\n2. VIDIT-FAID ControlNet for SDXL â­ KEY MODEL\n   Download: https://huggingface.co/SargeZT/controlnet-sd-xl-1.0-depth-faid-vidit\n   File: controlnet-sd-xl-1.0-depth-faid-vidit.safetensors OR diffusion_pytorch_model.safetensors\n   Place in: ComfyUI/models/controlnet/\n   Purpose: Controls lighting direction via depth maps\n\n3. MiDaS Depth Estimator (auto-downloads via ControlNet Auxiliary)\n   Used to generate depth maps automatically\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ“· CAMERA POSITION PRESETS (Same as Flux - Copy to 'Camera Position' node):\n\nâ”Œâ”€ BASIC POSITIONS\nâ”‚  Front:   viewed from front center\nâ”‚  Back:    viewed from behind, back view\nâ”‚  Left:    viewed from left side\nâ”‚  Right:   viewed from right side  \nâ”‚  Top:     viewed from above, top-down view, bird's eye view\nâ”‚  Bottom:  viewed from below, worm's eye view, low angle\nâ”‚\nâ”œâ”€ DIAGONAL POSITIONS\nâ”‚  Front Top-Left:      viewed from front top-left angle\nâ”‚  Front Top-Right:     viewed from front top-right angle\nâ”‚  Back Top-Left:       viewed from back top-left angle, elevated rear view\nâ”‚  3/4 View:            three-quarter view from front-right\nâ”‚\nâ””â”€ SPECIALTY ANGLES\n   Extreme Close-up:    extreme close-up, macro view\n   Wide Angle:          wide angle view, expansive perspective\n   Isometric:           isometric view, game asset style\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ’¡ LIGHTING DIRECTION (Copy to 'Lighting Direction' node):\n\nâ„¹ï¸ NOTE: With VIDIT-FAID, lighting is controlled by DEPTH MAP + PROMPTS.\nThe depth map structure determines where light falls. Prompts refine the quality.\n\nâ”Œâ”€ LIGHTING QUALITY PROMPTS (Combine with camera position)\nâ”‚  Dramatic:      dramatic lighting, strong shadows, high contrast\nâ”‚  Soft:          soft diffused lighting, gentle shadows, even exposure\nâ”‚  Studio:        professional studio lighting, minimal shadows, clean\nâ”‚  Cinematic:     cinematic lighting, moody atmosphere, dramatic shadows\nâ”‚  Natural:       natural lighting, realistic shadows, photographic\nâ”‚  Rembrandt:     Rembrandt lighting, chiaroscuro, dramatic side lighting\nâ”‚  Rim Light:     rim lighting, edge glow, backlit highlights\nâ”‚  Golden Hour:   warm golden hour lighting, soft warm glow, long shadows\nâ”‚\nâ””â”€ DIRECTIONAL HINTS (Less important than depth map, but helps)\n   lit from front, lit from back, lit from above, lit from side\n   top-down lighting, side lighting, backlighting\n\nâš ï¸ IMPORTANT: Lighting direction is PRIMARILY controlled by the depth map structure!\nThe depth map shows the geometry, which determines where shadows fall.\nPrompts refine lighting quality (soft/hard, warm/cool, etc.)\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ¯ HOW TO USE:\n\n**METHOD 1: Auto-Generated Depth (Easiest)**\n1. Set 'Base Subject Prompt'\n2. Choose camera position preset\n3. Choose lighting quality preset\n4. Workflow auto-generates depth map from output (feedback loop)\n5. First generation uses basic depth, subsequent ones improve\n\n**METHOD 2: Upload Custom Depth Map (Best Control)**\n1. Create/download depth map image:\n   â€¢ White = close to camera/light\n   â€¢ Black = far from camera/light\n   â€¢ Gray = mid-distance\n2. Load in 'Load Depth Map' node\n3. Set prompts as desired\n4. Generate\n\n**METHOD 3: Use Reference Image**\n1. Load reference photo in 'Load Depth Map' node\n2. MiDaS auto-generates depth map\n3. Set camera/lighting prompts\n4. Generate - lighting will match reference depth structure\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nâš™ï¸ TECHNICAL SETTINGS:\n\nControlNet Strength: 0.65 (adjust 0.4-0.9)\n  â€¢ Lower (0.4-0.5): Subtle lighting control, more creative freedom\n  â€¢ Medium (0.6-0.7): Balanced - RECOMMENDED\n  â€¢ Higher (0.8-0.9): Strong depth adherence, precise lighting\n\nResolution: 1024Ã—1024 (SDXL native)\nSteps: 30 (25-40 range works well)\nCFG: 7.0 (adjust 5-10)\nSampler: dpmpp_2m_sde + karras (best for SDXL)\nDenoise: 1.0 (full generation)\n\nğŸ APPLE SILICON:\nâœ“ Works on Mac M1/M2/M3/M4\nâœ“ Uses standard SDXL (no special models needed)\nâœ“ Expected VRAM: ~10-14GB\nâœ“ Generation time: ~60-120s\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ’¡ DEPTH MAP GUIDE:\n\nFor cube lighting positions, depth map structure:\n\n**Light from FRONT**: Front surfaces white, back surfaces black\n**Light from BACK**: Back surfaces white, front surfaces black  \n**Light from LEFT**: Left surfaces white, right surfaces black\n**Light from TOP**: Top surfaces white, bottom surfaces black\n**Light from DIAGONAL**: Gradient from white (lit corner) to black (opposite corner)\n\nVIDIT-FAID interprets depth as lighting distance - closer (white) = more lit.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nğŸ“Š COMPARISON: SDXL vs FLUX\n\n| Feature | SDXL (This Workflow) | Flux Workflow |\n|---------|---------------------|---------------|\n| Lighting Control | âœ… Dedicated ControlNet (VIDIT-FAID) | âš ï¸ Prompt-based only |\n| Camera Control | ğŸ“ Prompt-based | ğŸ“ Prompt-based |\n| Precision | â­â­â­â­ High (depth-based) | â­â­â­ Medium (prompt adherence) |\n| Mac Compatible | âœ… Yes (standard models) | âœ… Yes (GGUF needed) |\n| Speed | ~60-120s | ~45-90s |\n| Consistency | â­â­â­â­ Very good | â­â­â­ Good |\n\nğŸ† RECOMMENDATION:\nâ€¢ Use SDXL for precise lighting control\nâ€¢ Use Flux for faster iteration or when no depth maps available\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
      ],
      "color": "#432",
      "bgcolor": "#653"
    }
  ],
  "links": [
    [1, 1, 0, 42, 0, "MODEL"],
    [2, 1, 1, 30, 0, "CLIP"],
    [3, 1, 1, 31, 0, "CLIP"],
    [4, 1, 2, 50, 1, "VAE"],
    [5, 1, 2, 50, 1, "VAE"],
    [6, 2, 0, 40, 2, "CONTROL_NET"],
    [10, 10, 0, 20, 0, "STRING"],
    [11, 11, 0, 20, 1, "STRING"],
    [12, 12, 0, 21, 1, "STRING"],
    [13, 13, 0, 14, 0, "IMAGE"],
    [14, 50, 0, 14, 0, "IMAGE"],
    [15, 14, 0, 40, 3, "IMAGE"],
    [20, 20, 0, 21, 0, "STRING"],
    [21, 21, 0, 30, 1, "STRING"],
    [30, 30, 0, 40, 0, "CONDITIONING"],
    [31, 31, 0, 40, 1, "CONDITIONING"],
    [40, 40, 0, 42, 1, "CONDITIONING"],
    [41, 40, 1, 42, 2, "CONDITIONING"],
    [42, 41, 0, 42, 3, "LATENT"],
    [43, 42, 0, 50, 0, "LATENT"],
    [50, 50, 0, 51, 0, "IMAGE"]
  ],
  "groups": [
    {
      "title": "Model Loading",
      "bounding": [-820, -250, 430, 300],
      "color": "#3f789e",
      "font_size": 24
    },
    {
      "title": "Camera & Lighting Prompts",
      "bounding": [-820, 70, 560, 560],
      "color": "#8A8A00",
      "font_size": 24
    },
    {
      "title": "Depth Map (Lighting Control)",
      "bounding": [-820, 610, 560, 370],
      "color": "#A87A3A",
      "font_size": 24
    },
    {
      "title": "Prompt Assembly",
      "bounding": [-230, 150, 340, 480],
      "color": "#88AA88",
      "font_size": 24
    },
    {
      "title": "ControlNet & Generation",
      "bounding": [150, -150, 1280, 780],
      "color": "#8A5082",
      "font_size": 24
    },
    {
      "title": "Output",
      "bounding": [1740, 50, 640, 600],
      "color": "#3f789e",
      "font_size": 24
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.75,
      "offset": [700, 300]
    }
  },
  "version": 0.4
}
